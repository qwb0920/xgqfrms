define("sound",[],function(){var e=function(e){this.init(e)};return e.prototype={init:function(e){this.sound=document.createElement("audio"),this.sound.setAttribute("src",e),this.sound.setAttribute("preload",!0),this.sound.setAttribute("id","yanSound")},src:function(e){return typeof e!="undefined"&&(this.sound.src=e),this.sound.src},play:function(e){this.src(e),this.sound.play()}},e}),define("screen",["zepto","sound"],function(e,t){var n=new t("media/click.wav"),r=function(){this.init()};return e.extend(r.prototype,{init:function(){var t=e("#screen"),n=parseInt(t.css("width"),10);this.$screen=t,this.width=n,t.height(n),this.bindEvent()},resetScreen:function(){var e=this.screen,t=e.length;while(t--)e[t]=0},reset:function(){this.$screen.empty(),this.$squares=e(),this.screen=[]},create:function(t){var n,r=this.$screen,i=(this.width-6*t)/t,s=e('<div class="row"></div>'),o=e('<div class="square js-square"></div>'),u=[];if(this.n&&this.n===t)return this.$squares.removeClass("square-active"),this.resetScreen(),0;this.reset(),this.n=t,o.width(i).height(i);for(n=0;n<t;n++)s.append(o.clone()),u[n]=0;for(n=0;n<t;n++)r.append(s.clone(!0,!0)),this.screen=this.screen.concat(u);this.$squares=r.find(".js-square")},bindEvent:function(){function s(e){var t=0,n=e.length;for(t=0;t<n;t++)if(e[t]===0)return!1;return!0}function o(e,t){var n=Math.floor(e/t),r=e%t,i=[];return i.push(e),n+1<t&&i.push((n+1)*t+r),n-1>-1&&i.push((n-1)*t+r),r-1>-1&&i.push(n*t+r-1),r+1<t&&i.push(n*t+r+1),i}function u(t,n){n.each(function(n){t[n]===0?e(this).removeClass("square-active"):e(this).addClass("square-active")})}function a(t,n,i){var a=n.index(t),f=o(a,i);f.forEach(function(e){r.screen[e]=Number(!r.screen[e])}),u(r.screen,n),e(document).trigger("screen/click"),s(r.screen)&&e(document).trigger("screen/success")}var t=this.$screen,r=this,i=document.hasOwnProperty("ontouchstart")?"tap":"click";t.on(i,".js-square",function(t){var i=e(this);n.play(),a(i,r.$squares,r.n),t.preventDefault()})}}),r}),define("storage",[],function(){var e=function(){this.init()};return e.prototype={init:function(){function e(){var e=!1;return typeof window.localStorage=="object"?e=localStorage:typeof window.globalStorage=="object"&&(e=window.globalStorage),e}this.storage=e()},getStorage:function(){return this.storage},save:function(e,t){var n=this.storage,r=!1;return n!==!1&&(r=n.setItem(e,t)),r},load:function(e){var t=this.storage,n="";return t!==!1&&(n=t.getItem(e)),n}},e}),define("score",["zepto","storage"],function(e,t){var n=function(){this.init()};return e.extend(n.prototype,{init:function(){var n=new t,r=parseInt(n.load("curLevel"),10)||1,i=parseInt(n.load("supLevel"),10)||1,s=parseInt(n.load("supClick"),10)||0,o=parseInt(n.load("curClick"),10)||0,u=parseInt(n.load("totalClick"),10)||0,a=e("#cur-level"),f=e("#sup-level"),l=e("#sup-level-click"),c=e("#cur-click"),h=e("#total-click");this.storage=n,this.$curLevel=a,this.$supLevel=f,this.$supClick=l,this.$curClick=c,this.$totalClick=h,this.curLevel=r,this.supLevel=i,this.supClick=s,this.curClick=o,this.totalClick=u,this.updateView()},getLevel:function(){return this.curLevel},addClick:function(){this.curClick+=1,this.totalClick+=1,this.updateView()},addLevel:function(){this.curLevel+=1;if(this.curLevel>this.supLevel||this.curLevel===this.supLevel&&this.supClick>this.totalClick)this.supLevel=this.curLevel,this.supClick=this.totalClick,e(document).trigger("score/hightLevel",[this.supLevel,this.supClick]);return this.save(),this.updateView(),this.curLevel},resetLevel:function(){var e=this.storage;return this.curLevel=parseInt(e.load("curLevel"),10)||1,this.curClick=parseInt(e.load("curClick"),10)||0,this.totalClick=parseInt(e.load("totalClick"),10)||0,this.updateView(),this.curLevel},reset:function(){this.curLevel=1,this.curClick=0,this.totalClick=0,this.updateView()},save:function(){var e=this.storage;e.save("curLevel",this.curLevel),e.save("supLevel",this.supLevel),e.save("supClick",this.supClick),e.save("curClick",this.curClick),e.save("totalClick",this.totalClick)},updateView:function(){this.$curLevel.html(this.curLevel),this.$supLevel.html(this.supLevel),this.$supClick.html(this.supClick),this.$curClick.html(this.curClick),this.$totalClick.html(this.totalClick)}}),n}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s+".js"))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n))}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.4",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("nls/data",{root:{title:"Inverter",comment:"disqus",header:{h1:"Inverter",share:"share"},score:{currentLevel:"Current Level:",bestLevel:"Best Level:",bestLevel1:"(",bestLevel2:"clicks)",currentClick:"Current Clicks:",totalClick:"Total Clicks:"},menu:{restartLevel:"Restart Level",restartGame:"New Game",intro:"Instructions"},download:{h2:"Scan code is downloaded to the mobile phone for offline play:",title:"download"},restartGamePop:{h2:"Are you sure?",body:"Do you really want to start over",ok:"New Game"},restartLevelPop:{h2:"Are you sure?",body:"Do you really want to start over",ok:"Restart Level"},successPop:{h2:"Congratulations to pass",body:'On to level <span id="success-pop-level">2</span>',ok:"Go"},hightLevelPop:{h2:"New record",body:"Congratulations, you have set a new record",ok:"Go",share:"Share"},sharePop:{h2:"Share",weibo:"Weibo",qzone:"Qzone",weixin:"Wechat",ok:"Close"},introPop:{h2:"Instructions",li1:"How to win: Make the board blue. ",li2:"How to play: Click a square to flip its color and the color of all tiles that share an edge with it.",ok:"Lets go!"}},"zh-cn":!0}),require.config({shim:{zepto:{exports:"Zepto"},baiduTemplate:{exports:"baidu.template"}}}),require(["zepto","screen","score","i18n!nls/data","baiduTemplate"],function(e,t,n,r,i){function s(){var t;document.title=r.title,t=i("t:header",{data:r.header}),e("#header").html(t),t=i("t:score",{data:r.score}),e("#score").html(t),t=i("t:menu",{data:r.menu}),e("#menu").html(t),t=i("t:download",{data:r.download}),e("#download").html(t),t=i("t:restart-game-pop",{data:r.restartGamePop}),e("#restart-game-pop").html(t),t=i("t:restart-level-pop",{data:r.restartLevelPop}),e("#restart-level-pop").html(t),t=i("t:success-pop",{data:r.successPop}),e("#success-pop").html(t),t=i("t:hightLevel-pop",{data:r.hightLevelPop}),e("#hightLevel-pop").html(t),t=i("t:share-pop",{data:r.sharePop}),e("#share-pop").html(t),t=i("t:intro-pop",{data:r.introPop}),e("#intro-pop").html(t),t=i("t:comment",{data:r.comment}),e("#comment").html(t),e("body").append(document.getElementById("t:"+r.comment).innerHTML)}function l(t,n){var r=encodeURIComponent("http://yanhaijing.com/inverter"),i=encodeURIComponent("变色方块 史上最难智力游戏，我逆天用了"+n+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧@xxx "),s=encodeURIComponent("http://yanhaijing.com/inverter/media/5.png"),o=encodeURIComponent("变色方块 史上最难智力游戏，我逆天用了"+n+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧"),u=encodeURIComponent("变色方块 史上最难智力游戏"),a=encodeURIComponent("变色方块 史上最难智力游戏"),f="http://service.weibo.com/share/share.php?url="+r+"&title="+i+"&pic="+s,l="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+r+"&desc="+o+"&title="+a+"&summary="+u+"&pic="+s,c="http://yanhaijing.com/inverter 变色方块 史上最难智力游戏，我逆天用了"+n+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧@xxx ",h="变色方块 史上最难智力游戏，我逆天用了"+n+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧";e("#share-weibo").attr("href",f),e("#share-qq").attr("href",l),e(".ds-thread textarea").val(c),document.title=h}s();var o=new t,u=new n,a=e(".js-pop"),f=document.hasOwnProperty("ontouchstart")?"tap":"click";e(function(){var e=u.getLevel();o.create(e)}),e(document).on("screen/success",function(){var t;e("#success-pop").show(),t=u.addLevel(),e("#success-pop-level").html(t),o.create(t),window.setTimeout(function(){e("#success-pop").hide()},2e3)}).on("screen/click",function(){u.addClick()}).on("score/hightLevel",function(t,n,r){e("#success-pop").hide(),e("#hightLevel-pop").show(),l(n,r)}),a.on(f,function(t){e(this).hide(),t.preventDefault()}),e("#restart-game").on(f,function(e){u.reset(),o.create(1),e.preventDefault()}),e("#pop-restart-game").on(f,function(t){e("#restart-game-pop").show(),t.preventDefault()}),e("#restart-level").on(f,function(e){o.create(u.resetLevel()),e.preventDefault()}),e("#pop-restart-level").on(f,function(t){e("#restart-level-pop").show(),t.preventDefault()}),e("#pop-intro").on(f,function(t){e("#intro-pop").show(),t.preventDefault()}),e(".js-share-btn").on(f,function(e){e.stopPropagation()}),e("#share").on(f,function(t){e("#share-pop").show(),t.preventDefault()}),e("#hight-share").on(f,function(t){e("#share-pop").show(),t.preventDefault(),t.stopPropagation()}),e("#share-weixin").on(f,function(t){e("#share-pop").hide(),e("#hightLevel-pop").hide(),e("#weixin-shade").show(),t.preventDefault(),t.stopPropagation()}),e("#weixin-shade").on(f,function(t){e("#weixin-shade").hide(),t.preventDefault()})}),define("index",function(){});